<style>
  body{
    margin: 0px;
  }

  .corpo{
    background-color: #f2db0a;width: 95vw;height: 90vh;margin: auto;margin-top: 6.5vh;display: flex;flex-direction: row;justify-content:center ;
  }

  .mostraform{
      width:100%;height: 121vh;margin: auto;
      background-color: #033986;
      background-position: center;
      z-index: 1000;
      position: absolute;left: 0;top: 0;
      display: none;
  }

  .sideLeft{
     width: 15vw;height: 90vh;margin: auto;background-color: rgb(242, 81, 81);float: left;
  }

  .sideMiddle{
     width: 69vw;height: 90vh;margin: auto;background-color:#ffffff;float: left;display: flex;flex-direction: column;justify-content: center;
  }

  

  .sideRight{
    width: 15vw;height: 90vh;margin: auto;background-color: white;float: left;
  }

  .btndraw{
    width: 120px;height: 5vh;margin: auto;background-color: #0b0bc9;border-radius: 5px ;color:#ffffff;
  }
</style>
<div class="d-flex corpo" id="corpo">
    <div id="sideLeft" class="sideLeft">

    </div>
    <div id="sideMiddle" class="sideMiddle">
          <canvas id="prancha" width="800px" height="400px" style="background-image:url('https://amelia.nyc3.digitaloceanspaces.com/441204576f30d47cdd7e_doisbanheiros.png');background-repeat: no-repeat;background-size: cover;margin:auto;border: red 2px solid;">
                
          </canvas>
          <div style="display: flex;flex-direction: row;margin: auto;justify-content: space-between;width: 100%;height: 5vh;background-color: gray;">
              <div style="width: 60px;height: 4vh;padding-top: 0.5vh;background-color: #ef520f;float: left;">

              </div>
              <div style="width: 60px;height: 4vh;padding-top: 0.5vh;background-color: #ef520f;float: left;">

              </div>
              <div style="width: 60px;height: 4vh;padding-top: 0.5vh;background-color: #ef520f;float: left;">

              </div>
              <div style="width: 60px;height: 4vh;padding-top: 0.5vh;background-color: #ef520f;float: left;">

              </div>
          </div>    
          <div id="btnDraw" style="width: 100%;height: 10vh;margin: auto;background-color: black;display: flex;flex-direction:row;justify-content: center;">
                <button class="btndraw">banheiros</button>
                <button class="btndraw">distribuição</button>
                <button id="btnRetorno" class="btndraw">retorno</button>
          </div>
           
    </div>
    
    <div id="sideRight" class="sideRight" style="padding-top: 2vh;">
        <div style="width: 95%;height: 10vh;margin: auto;background-color: #d3cfcf;text-align: center;padding-top: 4vh;border: #035384 2px solid;">
            <button>Upload</button>
        </div>
          <div style="text-align: center;margin-top: 1vh;display: flex;flex-direction: column;text-align: center;justify-items: auto;">
            <label>corpo.height:</label>
            <input id="corpo-heigth" type="text" style="width: 100px;height: 36px;background-color: #d3cfcf;color#ffffff;margin-left: 90px;">
        </div>
        <div style="text-align: center;margin-top: 1vh;display: flex;flex-direction: column;text-align: center;justify-items: auto;">
            <label>e.clientX:</label>
            <input id="e-clientX" type="text" style="width: 100px;height: 36px;background-color: #d3cfcf;color#ffffff;margin-left: 90px;">
        </div>
        <div style="text-align: center;margin-top: 1vh;display: flex;flex-direction: column;">
             <label>e.clientY:</label>
            <input id="e-clientY" type="text" style="width: 100px;height: 36px;background-color: #d3cfcf;color#ffffff;margin-left: 90px;">
        </div>
        <div style="text-align: center;margin-top: 1vh;display: flex;flex-direction: column;">
             <label>canvas.offsetLeft:</label>
            <input id="offsetLeft" type="text" style="width: 100px;height: 36px;background-color: #d3cfcf;color#ffffff;margin-left: 90px;">
        </div>
        <div style="text-align: center;margin-top: 1vh;display: flex;flex-direction: column;">
             <label>canvas.offsetTop:</label>
            <input id="offsetTop" type="text" style="width: 100px;height: 36px;background-color: #d3cfcf;color#ffffff;margin-left: 90px;">
        </div>
        <div style="text-align: center;margin-top: 1vh;display: flex;flex-direction: column;">
             <label>position X:</label>
            <input id="position-x" type="text" style="width: 100px;height: 36px;background-color: #d3cfcf;color#ffffff;margin-left: 90px;">
        </div>
        <div style="text-align: center;margin-top: 1vh;display: flex;flex-direction: column;">
            <label>position Y:</label>
            <input id="position-y" type="text" style="width: 100px;height: 36px;background-color: #d3cfcf;color#ffffff;margin-left: 90px;">
        </div>
    {{!-- ////////////////////////////////////////////////////////////// --}}
    <div id="form_escolheFicheiro" style="width: 90%;height: 48vh;margin: auto;display:block;background-color: #b1aeae;margin-top: 4vh;display: none;">
            <form action="/controle/upload" id="idfile" method="post" enctype="multipart/form-data" class="" style="background-color: #b1aeae;">
                            <div id="tituloSelectFoto" style="display: flex;flex-direction: row;justify-content: center;">
                            <div style="width: 100%;height: 3.5vh;margin: auto;background-color: #transparent;text-align: center;padding-top: 0.7vh;margin-bottom: 5px;">
                                    <label style="color: #ffffff;margin-left: 24px;">Selecione a fotografia <span><label id="idSpan" style="font-size: x-large;color: #ef520f;margin-left: 30px;font-weight: 100;"></label></span></label>
                                </div>
                            </div>  
                            <div id="tituloEscolheFicheiro" style="background-color:#a9a9ad;">
                                <input type="file" name="upload" id="fileA" style="margin-left: 24px;">
                                <input type="text" id="idLocalImagem" name="LocalImagem" style="display:none;color:#0000ff;background-color: #ffffff;" value="5"> {{!--idLocalImagem=t--}}
                                <input type="text" id="idNomeImagem" name="NameNomeImg" style="display:none;color:red;background-color: #0b0bc9;" value="">   {{!--idPosicaoImg=side --}}
                                <input id="plantaid" name="namePlanta_id" value="{{lojista._id}}" style="background-color: hotpink;display:none;">
                            </div>      
                
                            <div id="form_imagem" style="width: 90%;height:41vh;margin: auto;align-items: center ;z-index: 10;margin-top: 5px;padding: 10px;display: flex;flex-direction: column;background-color: #ffffff;">
                            
                                    {{!-- <div style="width: 100%;height: 38vh;margin: auto;text-align: center;vertical-align:auto;background-color:#035384;padding: 10px;"> --}}
                                   
                                      <img id="imgPreviewA" src="" alt="" class="" width="100%" height="" style="background-color: #67676b;width: auto;margin: auto; background-size: cover;height: 37vh;"/>
                                   
                                    {{!-- </div> --}}
                                    {{!-- <div style="width: 100%;height: 4vh;margin: auto;background-color: #80868b;text-align: center;padding-top: 0.5vh;">
                                    <button id="btnUpload" style="border-radius: 6px;background-color: coral;font-weight: 100;color:#ffffff;border:opx;display: none;">Upload</button>
                                    </div> --}}
                            </div>  
                            <div id="form_btn" style="width: 100%;height: 3vh;margin: auto;background-color:#b1aeae;">
                                    <button id="btnId" class="btn_gravar" type="text"  >Gravar</button>
                            </div>   
                    
            </form>
    </div>
    
</div>
<script>
const canvas = document.querySelector('canvas')
let f=document.getElementById("corpo")

let b=canvas.width;
console.log()

console.log(window.innerWidth)
//canvas.width = canvas.style.width
//canvas.height = canvas.style.height

console.log(canvas.width)
console.log(canvas.height)

const ctx = canvas.getContext('2d')

 ctx.beginPath()
 ctx.moveTo(0, 100)
 ctx.lineTo(800,100)
 ctx.lineWidth =4
 ctx.strokeStyle = "red"
 ctx.stroke()

 ctx.beginPath()
 ctx.moveTo(100,0)
 ctx.lineTo(100,400)
 ctx.lineWidth =4
 ctx.strokeStyle = "white"
 ctx.stroke()

  ctx.beginPath()
  ctx.moveTo(0, 200)
  ctx.lineTo(800,200)
  ctx.lineWidth =4
  ctx.strokeStyle = "blue"
  ctx.stroke()

 ctx.beginPath()
 ctx.moveTo(200,0)
 ctx.lineTo(200,400)
 ctx.lineWidth =4
 ctx.strokeStyle = "white"
 ctx.stroke()

  

  ctx.beginPath()
  ctx.moveTo(0, 300)
  ctx.lineTo(800,300)
  ctx.lineWidth =4
  ctx.strokeStyle = "white"
  ctx.stroke()

  ctx.beginPath()
  ctx.moveTo(300,0)
  ctx.lineTo(300,400)
  ctx.lineWidth =4
  ctx.strokeStyle = "white"
  ctx.stroke()

  ctx.beginPath()
  ctx.moveTo(400,0)
  ctx.lineTo(400,400)
  ctx.lineWidth =4
  ctx.strokeStyle = "white"
  ctx.stroke()

  ctx.beginPath()
  ctx.moveTo(500,0)
  ctx.lineTo(500,400)
  ctx.lineWidth =4
  ctx.strokeStyle = "pink"
  ctx.stroke()

  ctx.beginPath()
  ctx.moveTo(600,0)
  ctx.lineTo(600,400)
  ctx.lineWidth =4
  ctx.strokeStyle = "black"
  ctx.stroke()

  ctx.beginPath()
  ctx.moveTo(700,0)
  ctx.lineTo(700,400)
  ctx.lineWidth =4
  ctx.strokeStyle = "orange"
  ctx.stroke()
 


function drawLine(ctx, line) {
  const {
    start,
    end,
    lineWidth = 5,
    lineCap = 'round', 
    strokeStyle = 'white',
  } = line

  if(!start || !end) {
    throw new Error('Start or end of line not defined.')
  }

  ctx.beginPath()
  ctx.moveTo(start.x, start.y)
  ctx.lineTo(end.x, end.y)
  ctx.lineWidth = lineWidth
  ctx.lineCap = lineCap
  ctx.strokeStyle = strokeStyle
  ctx.stroke()
  ctx.closePath()
}

canvas.addEventListener('click', function(e) {
  const position = {
    x:0,
    y:0 
  }

  console.log(' [ 243 ] ',position)
  console.log('__________________________________')  
  console.log(canvas.height)
  console.log(canvas.offsetTop)
  console.log(e.clientY)
  console.log(f.offsetWidth)
  console.log('__________________________________')
  document.getElementById("corpo-heigth").value=f.offsetWidth + f.offsetLeft + 15
  document.getElementById('e-clientX').value=e.clientX
  document.getElementById('e-clientY').value=e.clientY
  document.getElementById("offsetLeft").value=canvas.offsetLeft
  document.getElementById("offsetTop").value=canvas.offsetTop



  
  const line = {
    start: position,
    end: position,
    lineWidth: 30,
    id:1
  }

  position.x=e.clientX  - canvas.offsetLeft
  position.y=e.clientY - canvas.offsetTop

  document.getElementById("position-x").value=position.x
  document.getElementById("position-y").value=position.y
 
  //position.x=1270
   console.log(position)
  drawLine(ctx, line)
})
</script>